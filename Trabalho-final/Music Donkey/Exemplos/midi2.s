###############################################
#  Programa de exemplo para Syscall MIDI      #
#  ISC Junho 2018			      #
#  Marcus Vinicius Lamar		      #
###############################################

.data
# lista de tempo, canal, nota, volume, duração
NOTAS: .word 

4798, 1, 57, 106, 300,
4798, 0, 57, 106, 300,
5098, 0, 61, 106, 150,
5098, 1, 61, 106, 150,
5248, 0, 62, 106, 150,
5248, 1, 62, 106, 150,
5398, 2, 45, 65, 1799,
5398, 2, 57, 65, 1799,
5398, 2, 64, 65, 1799,
5398, 2, 52, 65, 1799,
5398, 2, 60, 65, 1799,
5398, 3, 64, 65, 1799,
5398, 1, 64, 106, 300,
5398, 3, 45, 65, 1799,
5398, 3, 60, 65, 1799,
5398, 3, 57, 65, 1799,
5398, 3, 52, 65, 1799,
5398, 0, 64, 106, 300,
5698, 0, 57, 106, 300,
5698, 1, 57, 106, 300,
5998, 1, 61, 106, 150,
5998, 0, 61, 106, 150,
6148, 1, 62, 106, 149,
6148, 0, 62, 106, 149,
6297, 1, 64, 106, 300,
6297, 0, 64, 106, 300,
6597, 1, 57, 106, 300,
6597, 0, 57, 106, 300,
6897, 0, 61, 106, 150,
6897, 1, 61, 106, 150,
7047, 1, 62, 106, 150,
7047, 0, 62, 106, 150,
7197, 3, 64, 65, 450,
7197, 2, 45, 65, 450,
7197, 3, 60, 65, 450,
7197, 2, 52, 65, 450,
7197, 2, 64, 65, 450,
7197, 2, 57, 65, 450,
7197, 3, 45, 65, 450,
7197, 2, 60, 65, 450,
7197, 0, 64, 106, 900,
7197, 3, 57, 65, 450,
7197, 1, 64, 106, 900,
7197, 3, 52, 65, 450,
7647, 2, 64, 65, 450,
7647, 2, 60, 65, 450,
7647, 3, 64, 65, 450,
7647, 3, 52, 65, 450,
7647, 3, 45, 65, 450,
7647, 3, 60, 65, 450,
7647, 3, 57, 65, 450,
7647, 2, 45, 65, 450,
7647, 2, 52, 65, 450,
7647, 2, 57, 65, 450,
8097, 3, 64, 65, 450,
8097, 2, 64, 65, 450,
8097, 3, 57, 65, 450,
8097, 3, 60, 65, 450,
8097, 2, 60, 65, 450,
8097, 2, 45, 65, 450,
8097, 0, 57, 106, 900,
8097, 2, 57, 65, 450,
8097, 2, 52, 65, 450,
8097, 3, 52, 65, 450,
8097, 1, 57, 106, 900,
8097, 3, 45, 65, 450,
8547, 2, 52, 65, 450,
8547, 3, 45, 65, 450,
8547, 2, 60, 65, 450,
8547, 2, 57, 65, 450,
8547, 2, 64, 65, 450,
8547, 3, 64, 65, 450,
8547, 2, 45, 65, 450,
8547, 3, 60, 65, 450,
8547, 3, 52, 65, 450,
8547, 3, 57, 65, 450,
8997, 2, 64, 65, 449,
8997, 2, 45, 65, 449,
8997, 2, 60, 65, 449,
8997, 2, 52, 65, 449,
8997, 2, 57, 65, 449,
8997, 3, 57, 65, 449,
8997, 3, 60, 65, 449,
8997, 3, 52, 65, 449,
8997, 1, 60, 106, 150,
8997, 3, 45, 65, 449,
8997, 3, 64, 65, 449,
8997, 0, 60, 106, 150,
9147, 0, 62, 106, 150,
9147, 1, 62, 106, 150,
9297, 0, 64, 106, 599,
9297, 1, 64, 106, 599,
9446, 2, 52, 65, 450,
9446, 2, 64, 65, 450,
9446, 2, 57, 65, 450,
9446, 2, 45, 65, 450,
9446, 2, 60, 65, 450,
9446, 3, 52, 65, 450,
9446, 3, 57, 65, 450,
9446, 3, 60, 65, 450,
9446, 3, 45, 65, 450,
9446, 3, 64, 65, 450,
9896, 1, 57, 106, 600,
9896, 2, 52, 65, 450,
9896, 2, 45, 65, 450,
9896, 3, 52, 65, 450,
9896, 3, 64, 65, 450,
9896, 3, 45, 65, 450,
9896, 3, 57, 65, 450,
9896, 3, 60, 65, 450,
9896, 2, 60, 65, 450,
9896, 2, 57, 65, 450,
9896, 2, 64, 65, 450,
9896, 0, 57, 106, 600,
10346, 2, 52, 65, 450,
10346, 2, 60, 65, 450,
10346, 2, 45, 65, 450,
10346, 2, 57, 65, 450,
10346, 2, 64, 65, 450,
10346, 3, 60, 65, 450,
10346, 3, 64, 65, 450,
10346, 3, 57, 65, 450,
10346, 3, 45, 65, 450,
10346, 3, 52, 65, 450,
10496, 1, 60, 106, 150,
10496, 0, 60, 106, 150,
10646, 0, 62, 106, 150,
10646, 1, 62, 106, 150,
10796, 2, 40, 65, 450,
10796, 2, 64, 65, 450,
10796, 2, 47, 65, 450,
10796, 3, 40, 65, 450,
10796, 1, 59, 106, 300,
10796, 0, 59, 106, 300,
10796, 3, 64, 65, 450,
10796, 3, 47, 65, 450,
10796, 2, 52, 65, 450,
10796, 3, 52, 65, 450,
10796, 3, 59, 65, 450,
10796, 3, 56, 65, 450,
10796, 2, 59, 65, 450,
10796, 2, 56, 65, 450,
11096, 1, 52, 106, 300,
11096, 0, 52, 106, 300,
11246, 2, 64, 65, 450,
11246, 2, 40, 65, 450,
11246, 2, 47, 65, 450,
11246, 2, 59, 65, 450,
11246, 2, 52, 65, 450,
11246, 3, 47, 65, 450,
11246, 3, 64, 65, 450,
11246, 3, 52, 65, 450,
11246, 3, 56, 65, 450,
11246, 3, 59, 65, 450,
11246, 3, 40, 65, 450,
11246, 2, 56, 65, 450,
11396, 1, 55, 106, 150,
11396, 0, 55, 106, 150,
11546, 1, 57, 106, 150,
11546, 0, 57, 106, 150,
11696, 3, 47, 65, 450,
11696, 2, 52, 65, 450,
11696, 2, 59, 65, 450,
11696, 3, 64, 65, 450,
11696, 3, 40, 65, 450,
11696, 3, 56, 65, 450,
11696, 3, 52, 65, 450,
11696, 3, 59, 65, 450,
11696, 2, 56, 65, 450,
11696, 1, 59, 106, 300,
11696, 0, 59, 106, 300,
11696, 2, 40, 65, 450,
11696, 2, 64, 65, 450,
11696, 2, 47, 65, 450,
11996, 1, 52, 106, 300,
11996, 0, 52, 106, 300,
12146, 3, 56, 65, 449,
12146, 3, 59, 65, 449,
12146, 3, 52, 65, 449,
12146, 3, 47, 65, 449,
12146, 3, 40, 65, 449,
12146, 3, 64, 65, 449,
12146, 2, 52, 65, 449,
12146, 2, 47, 65, 449,
12146, 2, 40, 65, 449,
12146, 2, 59, 65, 449,
12146, 2, 64, 65, 449,
12146, 2, 56, 65, 449,
12296, 0, 55, 106, 150,
12296, 1, 55, 106, 150,
12446, 1, 57, 106, 149,
12446, 0, 57, 106, 149,
12595, 2, 52, 65, 450,
12595, 0, 59, 106, 300,
12595, 3, 56, 65, 450,
12595, 2, 56, 65, 450,
12595, 2, 59, 65, 450,
12595, 1, 59, 106, 300,
12595, 2, 40, 65, 450,
12595, 2, 47, 65, 450,
12595, 2, 64, 65, 450,
12595, 3, 47, 65, 450,
12595, 3, 59, 65, 450,
12595, 3, 52, 65, 450,
12595, 3, 64, 65, 450,
12595, 3, 40, 65, 450,
12895, 0, 52, 106, 300,
12895, 1, 52, 106, 300,
13045, 2, 40, 65, 450,
13045, 2, 56, 65, 450,
13045, 2, 47, 65, 450,
13045, 3, 47, 65, 450,
13045, 3, 40, 65, 450,
13045, 3, 64, 65, 450,
13045, 3, 59, 65, 450,
13045, 3, 56, 65, 450,
13045, 3, 52, 65, 450,
13045, 2, 64, 65, 450,
13045, 2, 52, 65, 450,
13045, 2, 59, 65, 450,
13195, 1, 55, 106, 150,
13195, 0, 55, 106, 150,
13345, 0, 57, 106, 150,
13345, 1, 57, 106, 150,
13495, 3, 64, 65, 450,
13495, 3, 56, 65, 450,
13495, 3, 47, 65, 450,
13495, 1, 59, 106, 300,
13495, 2, 59, 65, 450,
13495, 3, 59, 65, 450,
13495, 3, 52, 65, 450,
13495, 2, 47, 65, 450,
13495, 2, 64, 65, 450,
13495, 2, 56, 65, 450,
13495, 2, 40, 65, 450,
13495, 3, 40, 65, 450,
13495, 2, 52, 65, 450,
13495, 0, 59, 106, 300,
13795, 0, 52, 106, 300,
13795, 1, 52, 106, 300,
13945, 3, 64, 65, 450,
13945, 2, 52, 65, 450,
13945, 3, 59, 65, 450,
13945, 3, 56, 65, 450,
13945, 3, 40, 65, 450,
13945, 3, 47, 65, 450,
13945, 2, 59, 65, 450,
13945, 2, 56, 65, 450,
13945, 2, 40, 65, 450,
13945, 2, 47, 65, 450,
13945, 2, 64, 65, 450,
13945, 3, 52, 65, 450,
14095, 1, 55, 106, 150,
14095, 0, 55, 106, 150,
14245, 1, 57, 106, 150,
14245, 0, 57, 106, 150,
14395, 2, 43, 65, 450,
14395, 2, 55, 65, 450,
14395, 0, 62, 106, 900,
14395, 3, 67, 65, 450,
14395, 1, 62, 106, 900,
14395, 3, 43, 65, 450,
14395, 3, 47, 65, 450,
14395, 2, 67, 65, 450,
14395, 2, 59, 65, 450,
14395, 3, 50, 65, 450,
14395, 2, 47, 65, 450,
14395, 2, 50, 65, 450,
14395, 3, 55, 65, 450,
14395, 3, 59, 65, 450,
14845, 2, 67, 65, 450,
14845, 3, 67, 65, 450,
14845, 3, 55, 65, 450,
14845, 2, 55, 65, 450,
14845, 3, 59, 65, 450,
14845, 2, 59, 65, 450,
14845, 3, 50, 65, 450,
14845, 3, 47, 65, 450,
14845, 3, 43, 65, 450,
14845, 2, 50, 65, 450,
14845, 2, 47, 65, 450,
14845, 2, 43, 65, 450,
15295, 2, 47, 65, 449,
15295, 2, 43, 65, 449,
15295, 2, 67, 65, 449,
15295, 2, 59, 65, 449,
15295, 2, 55, 65, 449,
15295, 2, 50, 65, 449,
15295, 3, 55, 65, 449,
15295, 3, 59, 65, 449,
15295, 3, 50, 65, 449,
15295, 3, 43, 65, 449,
15295, 3, 47, 65, 449,
15295, 3, 67, 65, 449,
15295, 0, 55, 106, 899,
15295, 1, 55, 106, 899,
15744, 2, 59, 65, 450,
15744, 2, 67, 65, 450,
15744, 3, 67, 65, 450,
15744, 2, 55, 65, 450,
15744, 2, 43, 65, 450,
15744, 2, 47, 65, 450,
15744, 2, 50, 65, 450,
15744, 3, 59, 65, 450,
15744, 3, 50, 65, 450,
15744, 3, 47, 65, 450,
15744, 3, 43, 65, 450,
15744, 3, 55, 65, 450,
16194, 0, 60, 106, 150
16194, 2, 47, 65, 450
16194, 2, 43, 65, 450
16194, 2, 67, 65, 450
16194, 2, 59, 65, 450
16194, 2, 50, 65, 450
16194, 2, 55, 65, 450
16194, 3, 55, 65, 450
16194, 3, 50, 65, 450
16194, 1, 60, 106, 150
16194, 3, 59, 65, 450
16194, 3, 67, 65, 450
16194, 3, 43, 65, 450
16194, 3, 47, 65, 450
16344, 1, 59, 106, 150
16344, 0, 59, 106, 150
16494, 1, 62, 106, 600
16494, 0, 62, 106, 600
16644, 2, 67, 65, 450
16644, 2, 59, 65, 450
16644, 2, 55, 65, 450
16644, 2, 43, 65, 450
16644, 2, 47, 65, 450
16644, 3, 55, 65, 450
16644, 3, 67, 65, 450
16644, 3, 50, 65, 450
16644, 3, 43, 65, 450
16644, 3, 47, 65, 450
16644, 3, 59, 65, 450
16644, 2, 50, 65, 450
17094, 3, 47, 65, 450
17094, 0, 55, 106, 600
17094, 2, 59, 65, 450
17094, 2, 67, 65, 450
17094, 3, 55, 65, 450
17094, 3, 67, 65, 450
17094, 3, 43, 65, 450
17094, 3, 59, 65, 450
17094, 3, 50, 65, 450
17094, 2, 55, 65, 450
17094, 2, 43, 65, 450
17094, 1, 55, 106, 600
17094, 2, 47, 65, 450
17094, 2, 50, 65, 450
17544, 2, 67, 65, 450
17544, 3, 50, 65, 450
17544, 3, 55, 65, 450
17544, 2, 50, 65, 450
17544, 3, 67, 65, 450
17544, 3, 59, 65, 450
17544, 2, 43, 65, 450
17544, 3, 43, 65, 450
17544, 3, 47, 65, 450
17544, 2, 59, 65, 450
17544, 2, 55, 65, 450
17544, 2, 47, 65, 450
17694, 0, 60, 106, 150
17694, 1, 60, 106, 150
17844, 1, 59, 106, 150
17844, 0, 59, 106, 150
17994, 3, 65, 65, 450
17994, 3, 62, 65, 450
17994, 1, 57, 106, 300
17994, 0, 57, 106, 300
17994, 3, 57, 65, 450
17994, 2, 57, 65, 450
17994, 2, 62, 65, 450
17994, 2, 50, 65, 450
17994, 3, 50, 65, 450
17994, 2, 65, 65, 450
18294, 0, 50, 106, 300
18294, 1, 50, 106, 300
18444, 3, 65, 65, 449
18444, 3, 50, 65, 449
18444, 3, 62, 65, 449
18444, 3, 57, 65, 449
18444, 2, 57, 65, 449
18444, 2, 62, 65, 449
18444, 2, 65, 65, 449
18444, 2, 50, 65, 449
18594, 0, 53, 106, 150
18594, 1, 53, 106, 150
18744, 1, 55, 106, 149
18744, 0, 55, 106, 149
18893, 2, 65, 65, 450
18893, 3, 50, 65, 450
18893, 3, 62, 65, 450
18893, 3, 65, 65, 450
18893, 1, 57, 106, 300
18893, 0, 57, 106, 300
18893, 3, 57, 65, 450
18893, 2, 50, 65, 450
18893, 2, 62, 65, 450
18893, 2, 57, 65, 450
19193, 1, 50, 106, 300
19193, 0, 50, 106, 300
19343, 3, 65, 65, 450
19343, 2, 62, 65, 450
19343, 2, 57, 65, 450
19343, 2, 50, 65, 450
19343, 3, 62, 65, 450
19343, 3, 50, 65, 450
19343, 2, 65, 65, 450
19343, 3, 57, 65, 450
19493, 0, 53, 106, 150
19493, 1, 53, 106, 150
19643, 1, 55, 106, 150
19643, 0, 55, 106, 150
19793, 3, 62, 65, 450
19793, 0, 57, 106, 300
19793, 3, 57, 65, 450
19793, 3, 65, 65, 450
19793, 3, 50, 65, 450
19793, 2, 57, 65, 450
19793, 2, 62, 65, 450
19793, 2, 65, 65, 450
19793, 2, 50, 65, 450
19793, 1, 57, 106, 300
20093, 0, 50, 106, 300
20093, 1, 50, 106, 300
20243, 3, 62, 65, 450
20243, 3, 50, 65, 450
20243, 3, 65, 65, 450
20243, 3, 57, 65, 450
20243, 2, 65, 65, 450
20243, 2, 62, 65, 450
20243, 2, 50, 65, 450
20243, 2, 57, 65, 450
20393, 0, 53, 106, 150
20393, 1, 53, 106, 150
20543, 0, 55, 106, 150
20543, 1, 55, 106, 150
20693, 2, 62, 65, 450
20693, 2, 65, 65, 450
20693, 2, 57, 65, 450
20693, 2, 50, 65, 450
20693, 3, 62, 65, 450
20693, 3, 65, 65, 450
20693, 0, 57, 106, 300
20693, 3, 57, 65, 450
20693, 1, 57, 106, 300
20693, 3, 50, 65, 450
20993, 0, 50, 106, 300
20993, 1, 50, 106, 300
21143, 2, 62, 65, 450
21143, 2, 57, 65, 450
21143, 2, 50, 65, 450
21143, 3, 62, 65, 450
21143, 3, 65, 65, 450
21143, 3, 50, 65, 450
21143, 3, 57, 65, 450
21143, 2, 65, 65, 450
21293, 0, 53, 106, 150
21293, 1, 53, 106, 150
21443, 1, 55, 106, 150
21443, 0, 55, 106, 150
21593, 3, 45, 65, 449
21593, 3, 52, 65, 449
21593, 3, 57, 65, 449
21593, 0, 64, 106, 899
21593, 3, 60, 65, 449
21593, 1, 64, 106, 899
21593, 3, 64, 65, 449
21593, 2, 52, 65, 449
21593, 2, 45, 65, 449
21593, 2, 60, 65, 449
21593, 2, 57, 65, 449
21593, 2, 64, 65, 449
22042, 2, 52, 65, 450
22042, 3, 45, 65, 450
22042, 2, 57, 65, 450
22042, 2, 64, 65, 450
22042, 3, 57, 65, 450
22042, 3, 52, 65, 450
22042, 2, 60, 65, 450
22042, 2, 45, 65, 450
22042, 3, 64, 65, 450
22042, 3, 60, 65, 450
22492, 0, 57, 106, 900
22492, 2, 64, 65, 450
22492, 3, 64, 65, 450
22492, 2, 60, 65, 450
22492, 2, 52, 65, 450
22492, 2, 57, 65, 450
22492, 3, 45, 65, 450
22492, 2, 45, 65, 450
22492, 3, 52, 65, 450
22492, 3, 60, 65, 450
22492, 3, 57, 65, 450
22492, 1, 57, 106, 900
22942, 3, 60, 65, 450
22942, 2, 60, 65, 450
22942, 2, 64, 65, 450
22942, 3, 45, 65, 450
22942, 3, 52, 65, 450
22942, 2, 57, 65, 450
22942, 3, 57, 65, 450
22942, 2, 52, 65, 450
22942, 2, 45, 65, 450
22942, 3, 64, 65, 450
23392, 2, 60, 65, 450
23392, 2, 52, 65, 450
23392, 0, 60, 106, 150
23392, 2, 64, 65, 450
23392, 2, 57, 65, 450
23392, 2, 45, 65, 450
23392, 1, 60, 106, 150
23392, 3, 64, 65, 450
23392, 3, 60, 65, 450
23392, 3, 57, 65, 450
23392, 3, 45, 65, 450
23392, 3, 52, 65, 450
23542, 0, 62, 106, 150
23542, 1, 62, 106, 150
23692, 1, 64, 106, 600
23692, 0, 64, 106, 600
23842, 2, 57, 65, 450
23842, 2, 60, 65, 450
23842, 2, 52, 65, 450
23842, 3, 64, 65, 450
23842, 2, 45, 65, 450
23842, 3, 60, 65, 450
23842, 3, 57, 65, 450
23842, 3, 52, 65, 450
23842, 3, 45, 65, 450
23842, 2, 64, 65, 450
24292, 3, 60, 65, 450
24292, 1, 57, 106, 600
24292, 3, 64, 65, 450
24292, 3, 45, 65, 450
24292, 3, 52, 65, 450
24292, 2, 45, 65, 450
24292, 0, 57, 106, 600
24292, 2, 52, 65, 450
24292, 2, 64, 65, 450
24292, 2, 60, 65, 450
24292, 2, 57, 65, 450
24292, 3, 57, 65, 450
24742, 2, 64, 65, 449
24742, 2, 45, 65, 449
24742, 3, 60, 65, 449
24742, 2, 57, 65, 449
24742, 2, 60, 65, 449
24742, 2, 52, 65, 449
24742, 3, 45, 65, 449
24742, 3, 52, 65, 449
24742, 3, 57, 65, 449
24742, 3, 64, 65, 449
24892, 0, 60, 106, 149
24892, 1, 60, 106, 149


.text
	la s0,NOTAS		# define o endereço das notas
	li t0,0			# zera o contador de notas
	li a2,24		# define o instrumento
	li s3,0			# tempo anterior
	li s5,0			# canal a ser tocado
	li s1,550		# numero de notas
	
LOOP:	beq t0,s1, FIM	# contador chegou no final? então  vá para FIM
	lw s2,0(s0)		# le tempo inicial
	lw s4,4(s0)		# le canal
	bne s4,s5,PULA
	lw a0,8(s0)		# le o valor da nota
	lw a3,12(s0)		# le o volume
	lw a1,16(s0)		# le a duracao da nota

	li a7,31		# define a chamada de syscall
	ecall			# toca a nota
	beq s2,s3,PULA
	mv a0,a1		# passa a duração da nota para a pausa
	li a7,32		# define a chamada de syscal 
	ecall			# realiza uma pausa de $a0 ms
	mv s3,s2		# copia o tempo
PULA:	addi s0,s0,20		# incrementa para o endereço da próxima nota
	addi t0,t0,1		# incrementa o contador de notas
	j LOOP			# volta ao loop
	
FIM:	li a0,40		# define a nota
	li a1,1500		# define a duração da nota em ms
	li a2,127		# define o instrumento
	li a3,127		# define o volume
	li a7,31		# define o syscall
	ecall			# toca a nota
	
	li a7,10		# define o syscall Exit
	ecall			# exit

